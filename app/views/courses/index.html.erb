<h1>Courses</h1>

<div class="row mb-2">
  <div class="col-xl-7 col-md-9">
    <%= search_form_for @q do |f| %>
      <div class="input-group">
        <%= f.search_field :name_cont, placeholder: 'Search for course name', class: 'form-control' %>

        <%= f.collection_select(:year_id_eq, @years, :id, :name, { include_blank: 'Filter by year' }, {class: 'mx-2 form-control'}) %>

        <div class="input-group-append">
          <%= f.submit class: 'btn btn-primary' %>
        </div>
      </div>
    <% end %>
  </div>
</div>


<table class="table table-sm bg-white table-bordered table-hover table-striped">
  <thead>
    <tr>
      <th><%= sort_link(@q, :name) %></th>
      <th><%= sort_link(@q, :year) %></th>
      <th><%= sort_link(@q, :lab) %></th>
      <th><%= sort_link(@q, :students) %></th>
      <th colspan="3"></th>
    </tr>
  </thead>

  <tbody>
    <% @courses.each do |course| %>
      <tr>
        <td><%= link_to course.name, course %></td>
        <td><%= course.year %></td>
        <td><%= course.labs.count %></td>
        <td><%= course.students.count %></td>
        <td><%= link_to 'Show', course %></td>
        <td><%= link_to 'Edit', edit_course_path(course) %></td>
        <td><%= link_to 'Destroy', course, method: :delete, data: { confirm: 'Are you sure?' } %></td>
      </tr>
    <% end %>
  </tbody>
</table>

<br>

<%= link_to 'New Course', new_course_path, class: 'btn btn-outline-primary my-3'  %>
